<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Gyu's personal blog]]></title><description><![CDATA[life, the universe and everything]]></description><link>https://pasztor.github.io/blog</link><image><url>/blog/images/firstentrybg.jpg</url><title>Gyu&apos;s personal blog</title><link>https://pasztor.github.io/blog</link></image><generator>RSS for Node</generator><lastBuildDate>Fri, 19 Oct 2018 22:32:41 GMT</lastBuildDate><atom:link href="https://pasztor.github.io/blog/rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title><![CDATA[Bridge mode]]></title><description><![CDATA[<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_why_did_i_choose_upc">Why did I choose UPC</a></li>
<li><a href="#_the_kinda_good_era">The kinda' good era</a></li>
<li><a href="#_the_last_couple_of_months">The last couple of months</a></li>
<li><a href="#_bridge_mode">Bridge mode</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_why_did_i_choose_upc">Why did I choose UPC</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Well, why I lived in Dublin UPC provided a very reliable service. I had no reason to complain. Sorry, I meant Virgin Media.</p>
</div>
<div class="paragraph">
<p>Before I moved to Dublin I lived in the same district in Budapest as I live now. Even the closest bus stop is tha same. There is kinda 40 meters between my old flat and my current one :) I don&#8217;t like changes if they don&#8217;t mean also an improvement at the same time.</p>
</div>
<div class="paragraph">
<p>In those days, I was an UPC user. Mostly satisfied. (Mostly harmless) However, one little secret: I had a TC modem then, and I used that modem in bridge mode. The cable guy told me a secret: If I put that to modem mode, but define a 192.168.0.x/24 address as a secondary on my own router I can still access the admin interface via 192.168.0.1. Cool! These are the small secrets, why I happily pay that small amount for installing the modem. And in these old flats the cables could be problematic as well. At least I instantly hava a professionel, who has tools to fix that. I already have a tons of tools myself. And I not mean just the screwdriver, but I believe in wired network for devices which have a fixed position. That includes the cable modem, my own router, nas, switch, desktop computer, laptop docking station, media player and amplifier.</p>
</div>
<div class="paragraph">
<p>So, I have tons of tools at home. I don&#8217;t want to make my situation even worse to have tools for RF cables. In the '90s a pocket knife was enough to prepare the cables. However it was also easy to cut yourself at the same time. But in those days, only some analogue tv broadcast travelled through that wire. There were no Docsis 3.0 at all. The first time I met with an F connector was when we bought a satellite reveiver. (Still the '90s) To rig the coax cables in a proper way, it also needs a different toolset. I rather don&#8217;t waste my time with that. It&#8217;s a one time job per move between cities. Or sometimes between countries in my case :)</p>
</div>
<div class="paragraph">
<p>Btw.: My amplifier&#8217;s remote controller is so poor in quality, that a couple of the buttons don&#8217;t even work after a couple of years. The power button is one of them. So If I don&#8217;t want to get up from my beansack chair, I just use a shell script to turn it on/of, change between media player and cd-line in inputs, or set volume. And I wouldn&#8217;t call a Marantz SR-6007 a low-end device. But certainly, who designed it&#8217;s remote controller weren&#8217;t the sharpest knife in the drawer. That also stands for those who designed its display.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/marantz_display.jpg" alt="Display of my Marantz amp">
</div>
</div>
<div class="paragraph">
<p>That scripts is not a biggie:</p>
</div>
<div class="listingblock">
<div class="title">bin/maris</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">#!/bin/sh

case "$1" in
  on)
    curl -X POST --data-urlencode 'cmd0=PutZone_OnOff/ON' http://maris.home.intra/MainZone/index.put.asp
    ;;
  off)
    curl -X POST --data-urlencode 'cmd0=PutZone_OnOff/OFF' http://maris.home.intra/MainZone/index.put.asp
    ;;
  cd)
    curl -X POST --data-urlencode 'cmd0=PutZone_InputFunction/CD' http://maris.home.intra/MainZone/index.put.asp
    ;;
  mplay)
    curl -X POST --data-urlencode 'cmd0=PutZone_InputFunction/MPLAY' http://maris.home.intra/MainZone/index.put.asp
    ;;
  vol)
    curl -X POST --data-urlencode "cmd0=PutMasterVolumeSet/$2" http://maris.home.intra/MainZone/index.put.asp
    ;;
esac</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_kinda_good_era">The kinda' good era</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the begginning I really liked what I got from UPC. The same native IPv6 connection what I&#8217;ve got in Dublin. Combined in dual stack with a cgnat IPv4 access. I didn&#8217;t mind the problem, that I didn&#8217;t have a public IPv4 address. What I wanted to access remotely, I could do via tunnels. Or I could access other stuff directly via IPv6, just I had a feeling that only a couple of UPC users and AWS EC2 instances has proper IPv6 access. The rest of the world still uses IPv4.</p>
</div>
<div class="paragraph">
<p>But at least I could experiment with pfSense&#8217;s IPv6 settings and playing around with IPv6 in EC2.</p>
</div>
<div class="paragraph">
<p>It was also a difference compared to Dublin, that the connection went down in my favourite time frame, which means the weekends. I usually binge watch series or do various research work on Friday and Saturday evenings. Many times I hit the sack on the next morning around 6-7 am.</p>
</div>
<div class="paragraph">
<p>Most of the times when I identified myself in their IVR with my client id the machine voice already anounced that there are maintenance in my area. It felt like they do a lot of firefights, instead of just maintaining a working service. But you could "subscribe" to a notification and they sent an SMS when the maintenance finished.</p>
</div>
<div class="paragraph">
<p>Usually a couple of days later, I got an e-mail from them asking feedback, they were curious about the level of my satisfaction. Well, at least I felt satisfied, because I had a feeling that they work and they care with their customers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_last_couple_of_months">The last couple of months</h2>
<div class="sectionbody">
<div class="paragraph">
<p>My friend Feri already tried to protect me from UPC and their Connectbox solution. But I was sceptic, because in Dublin I&#8217;ve got a very reliable service with the connectboxes. Without the smallest problem in one and a half year!</p>
</div>
<div class="paragraph">
<p>To summarize the next couple of paragraph: I don&#8217;t know what went wrong on their side, but now I have a feeling that most of their workers and even their managers are just imbecile spineless morons and they think that their customers are just labrats to experiment with.
Now let me tell the story why did I get to this conclusion.</p>
</div>
<div class="paragraph">
<p>In a nice sunday dawn around 2AM their service went down again. I decided to sit out Vivaldi and ask what to expect, when it will come back.</p>
</div>
<div class="paragraph">
<p><em>Btw.: they publish their <strong>planned</strong> maintenance windows. I checked. It&#8217;s true, just in an insane format. They dump a shitty excel-ish data into a pdf, paginated to tens of pages, without any sane order. Ok it&#8217;s ordered based on maintenance times. And in the area column they merge regions. But just specific regions, and not even in a consequent way. So sometimes your district appears together with some other. Sometimes not. So if you are curious about your own area, you have to read and process kinda every single entry in that spreadsheet, to find if your area is there. Since I live in Nagytétény, which is part of Budapest&#8217;s XXII. district, it&#8217;s better if I check the neighbor as well. At least Halásztelek, which is on the other side of the Danube, but close to us. Érd doesn&#8217;t matter from this prospective. Don&#8217;t ask why! It&#8217;s UPC. I already gave up, to understand their logic. C&#8217;mon is that that hard, to provide a service to send e-mails <strong>before</strong> maintenance to the custumers, and just select it from the database if that customer is affected or not? Is it still hard in 20-fucking-18?</em></p>
</div>
<div class="paragraph">
<p>Well, I wasn&#8217;t upset yet: They told me, that there is an unexpected issue affecting a larger area, and they are working on it. It could take days.</p>
</div>
<div class="paragraph">
<p>On the next Tueasday afternoon or better said evening I sat out Vivaldi again. They&#8217;re still working. No promises. Except that they told me, I will be compensated on the next month&#8217;s bill.</p>
</div>
<div class="paragraph">
<p>Then two weeks passed. I called them again. Well. I wasn&#8217;t as calm as I usually am when I speak with a support line. In the begginning I asked them nicely, what to expect. Then the lady lied into my face, that they fixed the problem <em>wait for it</em> <strong>twelve days ago</strong>!</p>
</div>
<div class="paragraph">
<p>My next two question was:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Why didn&#8217;t I get the usual notification via sms, when the maintenance was finished and the service should work as expected again?</p>
</li>
<li>
<p>If it&#8217;s fixed, why isn&#8217;t it work yet for me?</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>She insisted to her story that it&#8217;s fixed, she don&#8217;t see any problem and it should work and started to speek with me in a tone what I can&#8217;t tolerate from a service provider. It&#8217;s like the old communist era when they thought they farts the passat wind, and the customers are to feed them, we are just neccesary bad to them. UPC, Hungary, 2018. Thank you Liberty Media for these commies!</p>
</div>
<div class="paragraph">
<p>Then she kinda threatend me, that if she send a cable guy and the problem is on my side I have to pay for the repair service, etc. I told her that I&#8217;m pretty confident that to problem is not on my side, and <strong>please</strong> send the guy, I take the risk. Ok, I was upset, but I still remembered to use magic fuckin' words like <strong>please</strong>!</p>
</div>
<div class="paragraph">
<p>At this point, I think it&#8217;s a good idea to clarify what was exactly the problem: Many times the modem sent a reset when you tried to establish a tcp connection. (eg. if you open Facebook in your browser, it opens a lot!) I&#8217;ve got back an icmp address unreachable. Doesn&#8217;t matter what, but saying an average one connection in every three got this back. And the source IP of the icmp was the modem&#8217;s 192.168.0.1. As I mentioned above: the modem was in router mode, the usual default setup, nothing changed. Except the wireless SSID name and password was altered since the default settings + I allowed in its firewall that my EC2 instance can connect to one of my local VM via IPv6.</p>
</div>
<div class="paragraph">
<p>Next day, the cable guy arrives. Replace a modem with a new one. He says it works for him. Then I said, pleaase wait a little, I start up my machine. Ok, I don&#8217;t like to close tabs. I leave them open, and just suspend my machine. So, when it came up, and a couple of tcp connection was established (eg facebook chat likes to leave open tcp connections to receive push messages, google hangouts too, etc. And I don&#8217;t want to write here the obvious thing which uses tens of connections ;) Hope you understand ;) ) So, after tens of tcp connections were open, the modem started to do it&#8217;s crazy thing again.
At least the cable guy was sane and had spine / moral integrity and admitted that this is a problem and it&#8217;s technical level is above his knowledge, but he was also sure that it shouldn&#8217;t work like this.</p>
</div>
<div class="paragraph">
<p><em>That&#8217;s why I like, when someone is there personally! They have to admit the problem when they face it, and won&#8217;t lie into your face, like the lady did via phone.</em></p>
</div>
<div class="paragraph">
<p>He immediately started to discuss the problem with their center. They suggested to let&#8217;s try to change the modem to an IPv4 image. Well, I didn&#8217;t like the idea, since I was happy with cgnat+<strong>IPv6</strong>, but if that&#8217;s the price of a working internet connection, I can gave up native IPv6 access. So we tried that image.</p>
</div>
<div class="paragraph">
<p>Still the same happened. Then their coordinator in the center mentioned, that yay, they have a newer firmware version for this connectbox modem for IPv4. Let&#8217;s try that. We sat out the next reboot, and <strong>behold</strong>! Magic! It started to work. Yay!</p>
</div>
<div class="paragraph">
<p>My hypothesis is that on that crazy sunday night they started to spread a buggy firmware version. Just they have no inventory or tracking of used image versions and customers. It&#8217;s 2018. We don&#8217;t need AI to correlate problem reports and used image versions! It&#8217;s not even the rocket science level of data mining! I think a mediocre high school student with some python knowledge could do the job.</p>
</div>
<div class="paragraph">
<p>Lying into a customer&#8217;s face is also not a solid block of building customer trust. Please Sasha, forget the old commie attitude and treat customers as they are: <strong>customers</strong>!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bridge_mode">Bridge mode</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By this time, dear readers you might guessed that my way of the cross was not over with this yet since the title of this blog entry is 'Bridge mode'.
One or two weeks ago, this shiny new firmware started to behave badly again. Or I rather bet on that that they replaced that again with an even newer, but broken-again version.</p>
</div>
<div class="paragraph">
<p>At this point you might understand, why I feel myself as a labrat as a UPC customer.</p>
</div>
<div class="paragraph">
<p>At random times I felt that the cable modem just reboots. My OpenWRT firewall was not able to renew it&#8217;s dhcp lease. Then you waited a couple of minutes. It returned to operational again. Then for a few seconds 8.8.8.8&#8217;s ping time was over a whole second. Then after ~30-90 seconds ping times returned to normal again.</p>
</div>
<div class="paragraph">
<p>But it&#8217;s not a reliable connection. Not if you work from home a lot.</p>
</div>
<div class="paragraph">
<p>And I could barely stay calm when the modem did it&#8217;s reboot game during my morning standups between 10am and 11am. And it happened every day since this new problem appeared.</p>
</div>
<div class="paragraph">
<p>Then I said myself, enough of this shit, let&#8217;s change to bridge mode. I remember that while I used my TC modem in bridge mode, it gave a public IP to every client attached to it. I had the same Ubiquity RS-Pro box with OpenWRT. But now, another port from the cable modem was connected with my switch. And sometime when a guest was there, when their phone connected to the modem&#8217;s wifi, it got another public ip, just as my OpenWRT got.</p>
</div>
<div class="paragraph">
<p>In the meantime I started to play around with pfsense and with FreeBSD as a router/firewall. So that access port was connected with two wirtual machines. In one I had a pfsense and in the other I had a native FreeBSD, with a couple of <em>pf</em> rules.</p>
</div>
<div class="paragraph">
<p>I wanted to play nicely so I wanted to reshape my network before change to bridge mode, that way only one device needs a public IPv4 address. This job needed some restructure work in my network connections.
I reconfigured my nas, that the vf which provides the uplink connection of the FreeBSD box should now bound the the lan network of the pfsense.</p>
</div>
<div class="paragraph">
<p>I also configured my switch to provide an access port in the pfsense&#8217;s lan network. I thought it&#8217;s the time, that my internet-facing device should be the pfsense.</p>
</div>
<div class="paragraph">
<p>It was not the time yet for pfsense being my lan facing device. I stall this step since a long time. I want to learn how the dns settings exactly works in pfsense before I replace my old ubiquity with a pfsense vm. (Just I had other things to do with much higher prio.) In my OpenWRT, I changed dnsmasq settings to not use 53 ports and I configred a bind to the freed up 53 ports. It does the recursion on its own starting from the root servers. Doesn&#8217;t forwarded queries to any provider. Keep the resolution between me and the authoritative servers, don&#8217;t trust any other provider. Until I can&#8217;t do this configuration on pfsense, my lan-facing device remains the Ubiquity with the OpenWRT.
So I pulled the plug from the cable modem and connected to my switch. This way the OpenWRT&#8217;s uplink was provided by the pfsense vm.</p>
</div>
<div class="paragraph">
<p>I could do the same port forward on the pfsense what I had on my connectbox&#8217;s setup. It&#8217;s not a bid deal. Yeah, I feel the pain, that it has gui instead of a nice pf.conf file. But at least this part is not worse than OpenWRT&#8217;s.</p>
</div>
<div class="paragraph">
<p>It&#8217;s also a decision what I&#8217;m stalling since a long time, to find out what solution I want to use on my home Firewall: pfsense, with nice gui, and it has some really nice features. Like filtering ads, deeper https inspection, etc. Or implement the same from ground up in a native freebsd, and manage the configuration via ansible, so I could reproduce the whole setup in minutes. If you have any suggestions, or extra thought on this topice, please write to the comment section! Every comment is welcome!</p>
</div>
<div class="paragraph">
<p>Then I logged in to the modem&#8217;s setup. Changed it to bridge mode and voilá: after a couple of minutes it was in bridge mode. Don&#8217;t trust a provider&#8217;s device where imbecils maintain the software and they care more with the shiny UI effects than with a stable working <em>business logic</em> underneath.</p>
</div>
<div class="paragraph">
<p>Yepp, I know that this is not a general recipe for an average household  where a networking professional is not just available. But for every other case I suggest to take control at least on this level. From that very point when you gave up trust in UPC and don&#8217;t use their modem as a router your wrinkles just goes away and turn to smiles! Let&#8217;s just knock it on wood: I did this change on tuesday. Since that everything works, no interruptions. I have a strong and stable wired connection what I never had before.</p>
</div>
<div class="paragraph">
<p>Oh yeah. I said wired. From that point you switch of your cable modem as a router you can say bye bye to it&#8217;s wifi. Although I had to be honest it&#8217;s AC wifi was really a cool stuff. But at least my current employer don&#8217;t give us macbook pros, so I couldn&#8217;t even enjoy it&#8217;s advantages therefore I didn&#8217;t lost a thing here.</p>
</div>
<div class="paragraph">
<p>Now I&#8217;ll just go to read fisher99&#8217;s <a href="http://f99.hu/blog/">blog</a>. Maybe there are bigger idiots out in the world and I can calm down knowing that UPC&#8217;s idiots are just the tip of the iceberg.</p>
</div>
</div>
</div>]]></description><link>https://pasztor.github.io/blog/2018/10/19/Bridge-mode.html</link><guid isPermaLink="true">https://pasztor.github.io/blog/2018/10/19/Bridge-mode.html</guid><category><![CDATA[Blog]]></category><category><![CDATA[upc]]></category><category><![CDATA[connectbox]]></category><category><![CDATA[bridge_mode]]></category><category><![CDATA[marantz]]></category><dc:creator><![CDATA[PÁSZTOR György]]></dc:creator><pubDate>Fri, 19 Oct 2018 00:00:00 GMT</pubDate></item><item><title><![CDATA[History of a migration]]></title><description><![CDATA[<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_foreword">Foreword</a></li>
<li><a href="#_the_old_n54l">The old N54L</a>
<ul class="sectlevel2">
<li><a href="#_sb">sb</a></li>
<li><a href="#_omni">omni</a></li>
<li><a href="#_vbox">vbox</a></li>
</ul>
</li>
<li><a href="#_the_new_box">The new box</a>
<ul class="sectlevel2">
<li><a href="#_the_dom0">The dom0</a></li>
<li><a href="#_nas_omni_the_most_important_domu">nas-omni, the most important domU</a></li>
</ul>
</li>
<li><a href="#_epilog">Epilog</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_foreword">Foreword</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I&#8217;ve recently migrated my home NAS from an old HP microserver N54L to a custom built machine. This article and the following couple of articles will tell the story of that.</p>
</div>
<div class="paragraph">
<p>This will be a long story and practically I&#8217;m alerady done with the most of the tasks. So now I just try to remember what and how did I to manage this transition. I&#8217;m not a newbie, so notes were taken, where I can show what commands I&#8217;ve run, what result did them gave back, and hopefully I&#8217;ll remember why I&#8217;ve did the things the way I did, etc.</p>
</div>
<div class="paragraph">
<p>In this first article I will explain only the from and to states. What was my original NAS&#8217;s architecture and what is the achieved goal on the new one.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_old_n54l">The old N54L</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The old NAS was a HP Microserver N54L. The host OS was OmniOS 151014. Yes, I know it&#8217;s quite old. But, I didn&#8217;t have a chance to upgrade that to the latest LTS. My plan was, that the migration will solve that problem. One of the bigest problems was, that I still had two VirtualBox VM&#8217;s, and I still need at least one of the two.
On the gz I had three ngz:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>sb,</p>
</li>
<li>
<p>omni,</p>
</li>
<li>
<p>vbox.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The gz was running on a pendrive. All the data and ngz&#8217;s were on the spinning disks. The pool name was just the textbook example: <em>tank</em>.</p>
</div>
<div class="paragraph">
<p>The only extras compared to a basic N54L in the hw:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RAM upgraded to 16GB DDR3 ECC</p>
</li>
<li>
<p>A PCI-E LSI hba was installed. Since the HP microserver uses the same SFF-8087 connector as the LSI, it was not a big deal to use that instead of the motherboard&#8217;s ports.</p>
</li>
<li>
<p>Since the LSI card has 8 ports, I could have a 5 WD Red disk raidz, and a Samsung 850 EVO SSD as zil and l2arc.</p>
</li>
<li>
<p>The 5th disk was placed into the ODD&#8217;s slot.</p>
</li>
<li>
<p>The ssd was just lying there in the box. It doesn&#8217;t have moving parts, it&#8217;s not a problem, if it&#8217;s not fixed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When I had to give a name to the host, I didn&#8217;t have any good idea, so the hostname became: oi.</p>
</div>
<div class="paragraph">
<p>During the migration I renamed this to n54l. Still not a testimony of a huge fantasy, but at least it doesn&#8217;t look like openindiana or OmnI.</p>
</div>
<div class="sect2">
<h3 id="_sb">sb</h3>
<div class="paragraph">
<p>The sb was an old "SolarisBox"/"ShellBox". That was my "administration" interface. Threw rocks on me, but I also had <em>mc</em> installed here 😁</p>
</div>
<div class="paragraph">
<p>I don&#8217;t like to have important stuff in the Global Zone itself. This ngz was where I managed my files locally with an mc, etc. Well, most of these functions could been abandoned by now, but some sentimental feelings hold me back to dispose of this ngz. Ah and the other thing: this was the master of my home.intra dns zone 😁</p>
</div>
<div class="paragraph">
<p>Originally, in the previous life of this nas, it was an OpenIndiana 151a9. So the sb was salvaged from that version. The rpool was on a previous pendrive. Just after a couple of years that pendrive just died. Since illumos-based systems have a dump (similar to Linux&#8217;s swap) on the rpool, it was not unexpected. (Sorry for the double negative) But when that pendrive just died, I installed the 151014 OmniOS to the new pendrive. I saved what I could. The most important things were the zone configuration files.
Thanks to this design, I just needed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>to zpool import tank on the new OS</p>
</li>
<li>
<p>re-create the zones based on the salveged config files</p>
</li>
<li>
<p>install gz-parts of virtualbox into the GZ</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So the downtime was only that long, while I bought a new pendrive.</p>
</div>
<div class="paragraph">
<p>It was also a nice experience, that the 151014 could run the 151a9 without any change. It seems in those early times the abi didn&#8217;t diverged to much between this two Illumos-based os.</p>
</div>
</div>
<div class="sect2">
<h3 id="_omni">omni</h3>
<div class="paragraph">
<p>Since, the host OpenIndiana was replaced by OmniOS years ago, I installed another "ShellBox" to the system. Less packages, but more recent. And the important part was, that I could use some semi-offical package from the niksula.hut.fi repo. This was also a jumpbox, so I could logged in to my home network using mix of tunnels and TCP port forwards and ssh keys together.</p>
</div>
</div>
<div class="sect2">
<h3 id="_vbox">vbox</h3>
<div class="paragraph">
<p>As I already told, I didn&#8217;t want to run any service on the GZ directly. That was the case with my VirtualBox VM&#8217;s as well.
I had two VM&#8217;s in this zone:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>monitor: A linux vm running munin, and a migrated lxc (hostname: jango) which runs icinga. And previously I had a redmine here as well. And I&#8217;d like to forget this part (only the redmine, not the icinga) forever 😁</p>
</li>
<li>
<p>fbsd: A freebsd VM. For my first babysteps with FreeBSD.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_new_box">The new box</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I started the project more than a year ago. After a year I still was in the PoC state, so 1 or 2 months ago, I&#8217;ve just decided that I&#8217;ll buy the new disks, and let&#8217;s do the migration. (Kinda' pre-christmas gift to myself.)</p>
</div>
<div class="paragraph">
<p>The project started with finding the right hardware. Since this was planned as an upgrade, I thought every possible (and payable) part should be upgraded. Therefore I spent a lot of time with choosing the components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Silverstone SST-DS380B, I&#8217;ve read about it somewhere at <a href="https://hup.hu">hup</a></p>
</li>
<li>
<p>SuperMicro X10SDV-6C+-TLN4F Motherboard</p>
</li>
<li>
<p>Kingston KVR21R15D4K4/64 RAM 64 GB 2133 MHz DDR4 ECC Registered CL15 DIMM Kit (4 x 16 GB)</p>
</li>
<li>
<p>Samsung MZ-V6P512BW 960 PRO M.2-2280 512GB PCI Express 3.0 x4 NVMe Solid State Drive</p>
</li>
<li>
<p>Some salvaged pendrive for the Host OS 😁</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Since this motherboard has NICs which was made in the PCI SR-IOV era, I planned to use this with a Type1 Hypervisor, which can effetively use these features.</p>
</div>
<div class="paragraph">
<p>I also bought a switch, so I can connect all the ports together, I can run speed tests, implement PoC network configurations. At least, I can have several vlans. So I bought a <em>Cisco SG300-10P 8x10/100/1000 POE +2x UTP/SFP SRW2008P Gigabit Switch</em>.</p>
</div>
<div class="paragraph">
<p>Well, I know that the motherboard has 10GE ports, but I check and haven&#8217;t found 10G managed switches for a reasonable price. For PoC purpose, this will be just enough.</p>
</div>
<div class="paragraph">
<p>Most of the parts was given last year already. I used 3 old 750GB Samsung disks from my previous^n PC in the PoC phase, and started to implement the new system.</p>
</div>
<div class="sect2">
<h3 id="_the_dom0">The dom0</h3>
<div class="paragraph">
<p>As I said, I intended to use the benefits of the PCI SR-IOV interfaces. This way I can give a complete PCI virtual function to every VM on the host. Since the motherboard also has some kind of Xeon CPU, it has all the neccessary power to use this well. (Intel VT-d)</p>
</div>
<div class="paragraph">
<p>Well, from OmniOS&#8217;s prospective this hardware was too new to efficiently use these hw items. Or to use them at all. At least it can handle the GE interface. When I started to test OS&#8217;s, even FreeBSD had its issues with the ixgbe drivers. It also came up, to use FreeBSD as the <em>nas</em> system. But then I abandoned this idea. I feels the OmniOS and the illumos-based systems more mature. At least for me, it seems they spend more time on design robust backgrounds then to implement drivers for recent hardwares.</p>
</div>
<div class="paragraph">
<p>So I had no other choice but using Xen as hypervisor. But I wanted something lightweight in the dom0. Well, that was when I found <a href="https://alpinelinux.org"><em>alpine linux</em></a>.</p>
</div>
<div class="paragraph">
<p>It can be installed to a pendrive. But it uses the pendrive only at boot. It can load the whole system into memory. I can restrict how much memory should the dom0 see.</p>
</div>
<div class="paragraph">
<p>A small pendrive with a vfat filesystem could do the job. The configurations are saved in a tarball. Using the lbu commands it&#8217;s also not a big deal to manage the contents. All the packages are cached onto the pendrive, and loaded and <em>installed</em> on boot.</p>
</div>
<div class="paragraph">
<p>The hostname became <em>nas</em>. I neither had a better idea this time.</p>
</div>
<div class="paragraph">
<p>But, still the most important guest is an OmniOS domU, where I can share my files via NFS. Or when I need an iSCSI target, I can use that. Or can run ngz&#8217;s. Whatever you can imagine.</p>
</div>
<div class="paragraph">
<p>I tried to directly pass the ahci controller to omnios, but it couldn&#8217;t be done in a simple way, since the hardcoded stuff in alpine linux always loads the ahci driver. I tried to blacklist them, etc. but the modprobe config files are loaded from the pendrive at a later phase. So, I gave up.</p>
</div>
<div class="paragraph">
<p>Anyway: at the final stage, I plan to migrate the LSI controller to this box as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="_nas_omni_the_most_important_domu">nas-omni, the most important domU</h3>
<div class="paragraph">
<p>Well, As I said, it had its problems. I spend a lot of time finding why the xnf driver crash the system on boot. Well, Alpine has a much faster release cycle than Debian. They already had Xen 4.7 or something late when I started to experiment with that. I used several hours, just to pinpoint which alpine version was the one, where the guest omnios doesn&#8217;t crash, and which one was where it starts to crash.</p>
</div>
<div class="paragraph">
<p>Finally in 151026, they fixed the xnf driver. So it&#8217;s not interesting anymore. The root cause was that on xen&#8217;s side the <em>API</em> was changed and that changed was not followed on the guest&#8217;s side.</p>
</div>
<div class="paragraph">
<p>When it was done, I already started to experiment with this.</p>
</div>
<div class="paragraph">
<p>The two nas was running in paralell for a long time.</p>
</div>
<div class="paragraph">
<p>This was my PoC area for a long time. Now this is the <em>live</em> system, and this migration series entries in my blog will tell the story, how I migrated everything from my old N54L to this new machine.</p>
</div>
<div class="paragraph">
<p>A already had a couple of important ngz here, what I didn&#8217;t want to loose:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>rt: this would be kind of a replacement of the old omni zone. At least, one important package from the niksula.hut.fi repo was installed here, and was left running in screen, just to compare the two.</p>
</li>
<li>
<p>omni-lx: A regular lx branded zone with ubuntu 16.04LTS for having a linux based playground.</p>
</li>
<li>
<p>omni-ubi: Another lx branded zone, with another ubuntu 16.04LTS. I mounted a couple of datasets via lofs here, and an extra repo was added. I used this to run Avidemux. The sound part is not interesting when I want to cut out uninteresting parts and append videos together. You can already found some of them on youtube. eg. <a href="https://youtu.be/HFkYeluTUG0">this one</a>. It&#8217;s very nice how fast it can process videos, even if that was on old <em>less then 1T</em> era Samsung disks.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_epilog">Epilog</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Well, this was the original status. The achieved goal:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add in 5 new disks to the new nas</p>
</li>
<li>
<p>have all the data what the old n54l has</p>
</li>
<li>
<p>have all the services what the old n54l provided</p>
</li>
<li>
<p>don&#8217;t lose services what was built here during the PoC era</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the next couple of blog entries I&#8217;ll write about the important and interesting parts of this migration.</p>
</div>
</div>
</div>]]></description><link>https://pasztor.github.io/blog/2018/10/08/History-of-a-migration.html</link><guid isPermaLink="true">https://pasztor.github.io/blog/2018/10/08/History-of-a-migration.html</guid><category><![CDATA[Blog]]></category><category><![CDATA[OmniOS]]></category><category><![CDATA[NAS]]></category><category><![CDATA[n54l]]></category><category><![CDATA[supermicro]]></category><category><![CDATA[sr-iov]]></category><category><![CDATA[xen]]></category><category><![CDATA[alpine]]></category><dc:creator><![CDATA[PÁSZTOR György]]></dc:creator><pubDate>Mon, 08 Oct 2018 00:00:00 GMT</pubDate></item><item><title><![CDATA[Themes]]></title><description><![CDATA[<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_foreword">Foreword</a></li>
<li><a href="#_casper">casper</a></li>
<li><a href="#_ghostium">ghostium</a></li>
<li><a href="#_ichi">ichi</a></li>
<li><a href="#_roon">roon</a></li>
<li><a href="#_saga">saga</a></li>
<li><a href="#_the_shell">the-shell</a></li>
<li><a href="#_uno">uno</a></li>
<li><a href="#_uno_zen">uno-zen</a></li>
<li><a href="#_summary">summary</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_foreword">Foreword</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As I could defeat a couple of hubpress problems or at least circumvent them, I decided at the end, after testing kinda all the themes, that I don&#8217;t like them.
I had some problem with every one of them. Every one of them has some pros and cons, but I was not fully satisfied with any of them.</p>
</div>
<div class="paragraph">
<p>Besides, I haven&#8217;t found any site, where I could check some kind of preview how they look like in action.</p>
</div>
<div class="paragraph">
<p>This write will give you that:</p>
</div>
<div class="paragraph">
<p>Pictures about the hubpress themes, and some highly subjective comparison.</p>
</div>
<div class="paragraph">
<p>So my idea is: I&#8217;ll make a list here, with screenshots, and descriptions of every theme, and write down what is I like about that theme, and why I don&#8217;t like it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_casper">casper</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the <em>default</em> theme.</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nice opening page</p>
</li>
<li>
<p>The font is kinda readble and large enough, not tireing my eyes</p>
</li>
<li>
<p>Facebook share link</p>
</li>
<li>
<p>Twitter share link</p>
</li>
<li>
<p>Status bar showing the reading percent on the top of the screen</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The content is centered. Everything is in the middle of the page. If you resize your browser horizontally, the text not growing with it. I don&#8217;t like that! &#8594; <em>showstopper</em></p>
</li>
<li>
<p>No G+ share &#8594; <em>showstopper</em></p>
</li>
<li>
<p>No tags management &#8594; <em>showstopper</em></p>
</li>
<li>
<p>RSS links to feedly instead of the site&#8217;s own rss &#8594; <em>showstopper</em>, maybe easy to fix</p>
</li>
<li>
<p>The share links on the top of the screen only appear, when you scroll down into the content!</p>
</li>
<li>
<p>No explicit share icons at the end of the blog entry where the share usually are</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>I think, the thinking process is this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Read an article</p>
</li>
<li>
<p>Decide if I like that</p>
</li>
<li>
<p>Share</p>
</li>
<li>
<p>Maybe comment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The share happens <strong>after</strong> I&#8217;ve read the article. So the share button should be below the article IMHO.</p>
</div>
<div class="paragraph">
<p>Images:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Casper-Opening_page.png" alt="Casper - Opening Page">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Casper-Entry-Top.png" alt="Casper - Entry Top">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Casper-Entry-Bottom.png" alt="Casper - Entry Bottom">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ghostium">ghostium</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tab bar on the opening page</p>
</li>
<li>
<p>Tags handling</p>
</li>
<li>
<p>Facebook share link</p>
</li>
<li>
<p>Twitter share link</p>
</li>
<li>
<p>G+ share link</p>
</li>
<li>
<p>Working xml link to rss feed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Opening page cuts an interesting part of my cover pic, and not in a good way</p>
</li>
<li>
<p>No status bar of reading percentage</p>
</li>
<li>
<p>Content is focused in the middle of the page</p>
</li>
<li>
<p>Coverpic not working on the entries (<code>:hp-image:</code>) <em>showstopper</em> I found so nice cover pics for the topics! :D</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Ghostium-Opening_page.png" alt="Ghostium - Opening Page">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Ghostium-Opening-Sidebar.png" alt="Ghostium - Opening Page - Sidebar">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Ghostium-Tags.png" alt="Ghostium - Tags">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Ghostium-Entry-Top.png" alt="Ghostium - Entry - Top">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Ghostium-Entry-Bottom.png" alt="Ghostium - Entry - Bottom">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ichi">ichi</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nice-ish opening page, except the tab bar is on the right side. IMHO It&#8217;s irrational for those who read left to right.</p>
</li>
<li>
<p>Nice namecard-ish part at the end of the post, with nice sharing icons</p>
</li>
<li>
<p>Tag handling</p>
</li>
<li>
<p>Nice Namecardish thing at the bottom of the entries. I love them.</p>
</li>
<li>
<p>Also really nice share buttons</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No coverpic at the blog entries</p>
</li>
<li>
<p>No rss link</p>
</li>
<li>
<p>Only a handsome of the social media links appears on the opening page</p>
</li>
<li>
<p>Puts a bunch of disfunctional links to the opening page. I mean, I don&#8217;t mind the <em>home</em> or the <em>about</em> icon. But if there is no that kind of content in the repo, let me give an opportunity to disable them.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Ichi-Opening_page.png" alt="Ichi - Opening Page">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Ichi-Tags.png" alt="Ichi - Tags">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Ichi-Entry-Top.png" alt="Ichi - Entry - Top">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Ichi-Entry-Bottom.png" alt="Ichi - Entry - Bottom">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_roon">roon</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Disgusting opening page!!!</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>rss link on the opening page</p>
</li>
<li>
<p>Working cover pic</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This opening page is a horror!</p>
</li>
<li>
<p>Style is not bad, but&#8230;&#8203; Nothing impressive. To much square.</p>
</li>
<li>
<p>No tags! <em>showstopper</em></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Roon-Opening-Page-Top.png" alt="Roon - Opening Page - Top">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Roon-Opening-Page-Bottom.png" alt="Roon - Opening Page - Bottom">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Roon-Entry-Top.png" alt="Roon - Entry - Top">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Roon-Entry-Bottom.png" alt="Roon - Entry - Bottom">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_saga">saga</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Disfunctional!</p>
</div>
<div class="paragraph">
<p>Image proof:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Saga-Opening-Page.png" alt="Saga - Opening Page">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_shell">the-shell</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It&#8217;s almost a winner. Kinda nice, but&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nice opening page</p>
</li>
<li>
<p>tags are working</p>
</li>
<li>
<p>shareing icons for Twitter, Faceboog, G+</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The usual centered style</p>
</li>
<li>
<p>No rss link</p>
</li>
<li>
<p>No social media links</p>
</li>
<li>
<p>The shareing icons are after the disqus section&#8230;&#8203; I would change the order!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Images:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-TheShell-Opening_page.png" alt="The Shell - Opening Page">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-TheShell-Tag.png" alt="The Shell - Tags">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-TheShell-Entry-Top.png" alt="The Shell - Entry - Top">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-TheShell-Entry-Bottom.png" alt="The Shell - Entry - Bottom">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uno">uno</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nice opening page, but practically disfunctional&#8230;&#8203;
I could make screenshots via direct links, but I won&#8217;t spend much more time with a disfunctional theme.</p>
</div>
<div class="paragraph">
<p>Images:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Uno-Opening_page.png" alt="Uno - Opening Page">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Uno-Entry-Top.png" alt="Uno - Entry - Top">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-Uno-Entry-Bottom.png" alt="Uno - Entry - Bottom">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_uno_zen">uno-zen</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I think I kinda stay with this, even if it has some really bugging problem&#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Nice Opening page</p>
</li>
<li>
<p>Clean-ish design</p>
</li>
<li>
<p>Nice, and readable fonts</p>
</li>
<li>
<p>Grows with the browser width! This was the only one!</p>
</li>
<li>
<p>Nice social media icon set. Practically, I saw everything what I configured on the settings page!</p>
</li>
<li>
<p>Working tags!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Finding out how to open the opening page, could be tricky, if you don&#8217;t know where to click :)</p>
</li>
<li>
<p>No media share icons at the entries. In other circumstances I would say, it&#8217;s a showstopper, but&#8230;&#8203; Since this was the only one, which follow nicele the browser&#8217;s width, It won!</p>
</li>
<li>
<p>Kinda too bright. Even the opening page, and everything else looks like overexposed, or if the picture would have been taken with a very high ISO value.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-UnoZen-Opening_page.png" alt="Uno Zen - Opening Page">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-UnoZen-Opening_page2.png" alt="Uno Zen - Opening Page - Opened">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-UnoZen-Tags.png" alt="Uno Zen - Tags">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-UnoZen-Entry-Top.png" alt="Uno Zen - Entry - Top">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/blog/images/Blog-UnoZen-Entry-Bottom.png" alt="Uno Zen - Entry - Bottom">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_summary">summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As I said in the foreword, there are small annoying things in every theme. But finally I stayed at uno-zen. On the long term, if I could combine uno zen&#8217;s closing, with the ichi theme&#8217;s namecard+ shareing icon section, that would be my allwinner.
Maybe, I liked <em>The Shell</em> 's font and style a little bit better, but the centered style and missing coverpic on the entries are also showstoppers.</p>
</div>
</div>
</div>]]></description><link>https://pasztor.github.io/blog/2018/09/06/Themes.html</link><guid isPermaLink="true">https://pasztor.github.io/blog/2018/09/06/Themes.html</guid><category><![CDATA[Blog]]></category><category><![CDATA[themes]]></category><category><![CDATA[hubpress]]></category><dc:creator><![CDATA[PÁSZTOR György]]></dc:creator><pubDate>Thu, 06 Sep 2018 00:00:00 GMT</pubDate></item><item><title><![CDATA[Metaentry]]></title><description><![CDATA[<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_foreword">Foreword</a></li>
<li><a href="#_előszó">Előszó</a></li>
<li><a href="#_which_project_owns_your_github_pages_domain">Which project owns your github pages domain</a></li>
<li><a href="#_the_em_environment_em">The <em>environment</em></a></li>
<li><a href="#_the_installation_and_setup_of_hubpress">The installation and setup of hubpress</a></li>
<li><a href="#_settings_and_relative_absolute_urls">Settings and relative/absolute urls</a></li>
<li><a href="#_disqus">Disqus</a></li>
<li><a href="#_afterlife">Afterlife</a></li>
<li><a href="#_post_notes">Post-notes</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_foreword">Foreword</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Well I thought it could be a good idea to write down my experiences how did I configured and set up this blog engine, even if most of the tasks were trivial.
Since it&#8217;s a deeply technical topic, I thought the whole audience understands english, so it makes no sense to write this entry in hungarian.
I&#8217;ll have a hungarian foreword as well, just to clarify this, but the language of this entry will be english.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_előszó">Előszó</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Úgy gondoltam, hogy jó ötlet lenne leírni a tapasztalataimat a blogmotor bekonfigurálásával és életre lehelésével kapcsolatban, még akkor is, ha a lépések egy része teljesen magától értetődő volt.
Mivel ez egy meglehetősen technikai jellegű témakör, úgy gondoltam, hogy akit ez a téma érdekelhet ért angolul, így nincs értelme ezt a bejegyzést magyarul írjam.
Az előszót megírtam mindkét nyelven, hogy ezt tisztázzam, de ezen bejegyzés nyelve angol.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_which_project_owns_your_github_pages_domain">Which project owns your github pages domain</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In medias res: Let&#8217;s start with some historical background: I forked the <a href="https://github.com/HubPress/hubpress.io">hubpress repo</a> a long time ago to handle this problem area, and started the implementation.</p>
</div>
<div class="paragraph">
<p>It was so long ago, that I don&#8217;t even remember why did I choose hubpress among the offered possibilities to blog through github. So I won&#8217;t write cons and pros why did I choose hubpress. Honestly? I don&#8217;t f..ng remember. :smile:</p>
</div>
<div class="paragraph">
<p>Just there were a very important question, where I stalled the procedure and let myself time to manage it at a later time when I have the peacful environment to think about that deeply and make the right decesion. This was the <a href="https://github.com/HubPress/hubpress.io#configure-the-correct-branch">3.2</a> element from the installation steps: "configure the correct branch".</p>
</div>
<div class="paragraph">
<p>Don&#8217;t worry: I will explain the whole installation and setup procedure in this article, just I thought the background of this decision is kind of 0th step important.</p>
</div>
<div class="paragraph">
<p>Because many things will depend on this decesion. That was why I stalled for a long time to start my blog.</p>
</div>
<div class="paragraph">
<p>You can choose the easier way and let hubpress manage your "Github pages domain". Which means, if you want to publish anything onto your github pages site, you have to do it with hubpress. Since my whole idea was to become independent of providers, I didn&#8217;t want to push myself into a dependency on another technological component. So I choose the other option to let hubpress manage only a "subdomain". Well, the description in <a href="https://github.com/HubPress/hubpress.io#i-am-using-my-github-pages-domain-already-or-i-want-to-use-a-custom-domain">3.2.2</a> is quite confusing, since it&#8217;s not a subdomain. A subdomain would look like <code>subdomain.user.github.io</code>, but in this case, the base url looks like <code>user.github.io/reponame</code>.</p>
</div>
<div class="paragraph">
<p>This confusing wording was also part of the reason why I stalled to start my blog. I wanted to do it when I have enough time and patience to understand how this part works.
After I made some basic experiments with my <em>GPD</em> (I&#8217;ll use this in the following, since it&#8217;s very annoying to write down <em>Github Pages Domain</em> every time), I decided to continue the work on the blog&#8217;s setup. The exepriments were very simple: I just uploaded a simple index.html, and checked in my browser.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_em_environment_em">The <em>environment</em></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>My github account was given</p>
</li>
<li>
<p>Hubpress as a decision of my choice was given</p>
</li>
<li>
<p>My decision, that I do not want to let hubpress manage my whole <em>GPD</em> was given</p>
</li>
<li>
<p>my <em>username.github.io</em> repo was given (in case if I have to do something with that too)</p>
</li>
<li>
<p>Time and peacful environment was given</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_installation_and_setup_of_hubpress">The installation and setup of hubpress</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The classical <em>installation</em> procedure in this case is simple:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Just log in to github in your browser with your own account then point your browser to the <a href="https://github.com/HubPress/hubpress.io">hubpress repo</a> and fork the project. This is a fork even if you don&#8217;t want to contribute to hubpress later.</p>
</li>
<li>
<p>Go to your fork&#8217;s settings and:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>rename fork to <code>blog</code>. At least I renamed my to <code>blog</code>  since I wish to see <code>pasztor.github.io/blog</code> baseurl in my blog</p>
</li>
<li>
<p>change the default branch from <code>master</code> to <code>gh-pages</code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Clone your repo to your PC. For those who may not know me well enough I more like cli tools over gui tools. Cli tools guarantee you a way to automate steps and repeat steps. Or repeat them many times every time with a very tiny difference. Whatever you want. cli is limit is only your imagination! Even if I don&#8217;t want to clone this repo often, I may want to do things in my working copy, so it&#8217;s kind of a neccessary step to do this. So, I just run the <code>git clone &lt;repourl&gt;</code> command in my terminal.</p>
</li>
<li>
<p>edit your ˙hubpress/config.json` file. The mandatory fields what you have to fill at this step is: <code>username</code> which is your github account&#8217;s loginname, and <code>repositoryName</code> which was <code>blog</code> in my case.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>git add hubpress/config.json</code></p>
</li>
<li>
<p><code>git commit</code></p>
</li>
<li>
<p><code>git push</code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now your blog is ready to use.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_settings_and_relative_absolute_urls">Settings and relative/absolute urls</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Well, after I saw my blog-engine <em>working</em>, I immediately forgot the rest of the documentation. I needed google to go back to it, and find the admin page even if that is the first entry in the knowledge base. But hey, it was in the first 5 minutes with feeling success! I was not that desperate to read a knowledge base, where you a very long list, one entry after another&#8230;&#8203; Looks booooring!
But if a software is written well, that don&#8217;t need documentatio. Or at least the users don&#8217;t want to read that because it&#8217;s kind of self-suggesting how to use and which function. Maybe that&#8217;s my own vision, but I think a UX expert would confirm this.</p>
</div>
<div class="paragraph">
<p>Cheat #1 admin page of your blog is <code>&lt;baseurl&gt;/hubpress</code></p>
</div>
<div class="paragraph">
<p>Now the admin page. I usually try to check all the settings at the first time. Maybe you will forget them forever later. My motto: <code>If it works, you don&#8217;t need to fix it!</code></p>
</div>
<div class="paragraph">
<p>But an important thing what needed some time and try-and error cycle. Even with this, it was faster then find the right chapter in the knowledge base. This is the <em>social media links</em> section. So, when it asks your facebook or github or google+ id, it&#8217;s confufing again: it needs the full url for them. eg. <a href="https://facebook.com/gy.pasztor">https://facebook.com/gy.pasztor</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_disqus">Disqus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So, in most of the case, I could dodge the bullet and could make the functions work very fast without reading the documentation. If the labels in the settings were more precise I could skip the try and error cycles as well. But don&#8217;t be greedy!</p>
</div>
<div class="paragraph">
<p>Disqus was a whole different story. I already had a disqus id. Somewhere. I barely used that. Mostly I commented below a couple of hwsw articles. But that was rare. I don&#8217;t follow that, only if a deep link is shared from another article from hup, or something happens in the world and that is mentioned in one of my friends&#8217;s facebook newsflow.</p>
</div>
<div class="paragraph">
<p>To let user&#8217;s comment on your blog entry you have to create a "site" in your disqus account. So when the setting asks a <strong>shortname</strong> for a disqus site, well, my first thought was that is my <em>loginname</em> to disqus. Even if I use that with an sso &#8230;&#8203; ehm&#8230;&#8203; I never remember if that&#8217;s connected with my G+ or FaceBook account :)
So, I logged in, checked my account, pasted that to the <strong>shortname</strong> in the settings.</p>
</div>
<div class="paragraph">
<p>Still not work.
I did everything well. After a couple of google hits it seemed, that disqus just needs some time to spin up the initialization of a new site.
But it bugged me. I read the term <strong>site</strong> at too many places, and I went through every tiny detail of my disqus account, and haven&#8217;t met the term <strong>site</strong>.</p>
</div>
<div class="paragraph">
<p>So I thought it&#8217;s not a delay because of some initialization. I need to register a <strong>site</strong>.
You need to go to <a href="https://disqus.com/admin/">disqus&#8217;s admin site</a> and register your site there. They have a free priceplan as well, so you can use it free.
And as far as I could understood, without advertisements! At least, on my personal blog, I don&#8217;t want to see any advertisements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_afterlife">Afterlife</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some need to know thing:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>I tried to add this via cli. A couple of things went wrong in the web admin interface. Then&#8230;&#8203;</p>
</li>
<li>
<p>I tried to reset the whole git history, then republish the whole story begginging from my first entry&#8230;&#8203;</p>
</li>
<li>
<p>It doesn&#8217;t even work in chrome every time. Even in a firefox quantum 61, I had to try and try again a couple of times to re-publish my first post. When something in IT works stohastic like this&#8230;&#8203; Well, I wouldn&#8217;t call that software as mature.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The concept, how this Hubpress adminstration seems working:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Gets you a temporary access token to your github account every time you logs in. Every time! If you close the window and open it again, or just press the back button on your browser history! Geez! What the hack?! Can&#8217;t it store it&#8217;s important parts in a cookie or in a couple of cookies?!</p>
</li>
<li>
<p>Then you do what you want to do. You can save as a draft. In this case your post will go to _posts directory.</p>
</li>
<li>
<p>When you press publish, &#8230;&#8203; I assume, some javascript will render all the html contents (index.html, rss/index.xml, yyyy/mm/dd/Title-whatever.html, author/login/index.html). Then wrap the whole rendered content into a git transaction and uploads that to github via it&#8217;s api using the token.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sometimes it just changes nothing, but puts an empty commit onto the top of your git history!
For crying out loud: WHY!</p>
</div>
<div class="paragraph">
<p>At least, I don&#8217;t have too much posts yet, if I want to migrate this whole thing onto a different blog engine.
Comments and suggestions are welcome! At this stage, I say, this hubpress is really not reached the v1.0 maturity, and I need something which just works! I don&#8217;t want to suck to much with gui. I can accept that, to press the publish in the browser. But:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>please work! Not like a cat&#8217;s mood! Work! Every freakin' time I press the publish button!</p>
</li>
<li>
<p>do not make mess in my git repo&#8217;s history and don&#8217;t make unneccesary changes! If I watch the commits on my git repo, I want to see commits which makes sense. In case of <strong>Every</strong> commit!</p>
</li>
<li>
<p>Oh, and please! If sg. works once, don&#8217;t make it wrong in the background! Eg. When I rendered the content yesterday, it considered the :hp-image: tag in the source. Now, It just disappeared, not working anymore! It means for me, I still depend on unreliable js-shit which comes from 3rd party content providers. I don&#8217;t want to make that Faustian deal!</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If any of you have a better suggestion: comments are welcome!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_post_notes">Post-notes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After a couple of hours of try-and-error cycles, it seems I solved some of the mentioned problems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Better if you have explicitly set the theme in the settings</p>
</li>
<li>
<p>Set something explicit inside of the <em>blog path</em> variable. Well, it means, your index document goes one level deeper in the directory path, but you can <a href="https://github.com/pasztor/blog/blob/gh-pages/index.html">circumvent it</a> easily</p>
</li>
<li>
<p>Well, now at least this Schröedinger&#8217;s cat seems more often have a better mood, and it results more reliable working. But I swear, I haven&#8217;t seen this mentioned in the docs. I was so desperate I almost read every entry in the <a href="https://hubpress.gitbooks.io/hubpress-knowledgebase/content/">knowledge base</a>.</p>
</li>
<li>
<p>Toc and hp-image is also working:</p>
<div class="ulist">
<ul>
<li>
<p>For toc, it seems you have to use the default <code>:toc:</code> instead of <code>:toc: macro</code> + <code>toc::[]</code> like it was mentioned <a href="https://hubpress.gitbooks.io/hubpress-knowledgebase/content/write/titles_and_headings.html">here, in the <strong>why is the save button not working</strong> entry</a>.</p>
</li>
<li>
<p>For macros in general: <strong>Never leave an empty line between your <em>H1</em> heading and your macro definition lines!</strong></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>]]></description><link>https://pasztor.github.io/blog/2018/09/04/Metaentry.html</link><guid isPermaLink="true">https://pasztor.github.io/blog/2018/09/04/Metaentry.html</guid><category><![CDATA[Blog]]></category><category><![CDATA[git]]></category><category><![CDATA[github]]></category><category><![CDATA[github_pages]]></category><category><![CDATA[hubpress]]></category><dc:creator><![CDATA[PÁSZTOR György]]></dc:creator><pubDate>Tue, 04 Sep 2018 00:00:00 GMT</pubDate></item><item><title><![CDATA[First Entry]]></title><description><![CDATA[<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_curriculum_vitae_hu_avagy_mi_a_fenének_is_csináltam_ezt_blogot_meg_miért_pont_így_és_ide">Curriculum Vitae/hu == avagy mi a fenének is csináltam ezt blogot, meg miért pont így és ide</a></li>
<li><a href="#_curriculum_vitae_en_why_on_earth_did_i_this_blog_why_this_way_why_here">Curriculum Vitae/en == why on earth did I this blog, why this way, why here</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_curriculum_vitae_hu_avagy_mi_a_fenének_is_csináltam_ezt_blogot_meg_miért_pont_így_és_ide">Curriculum Vitae/hu == avagy mi a fenének is csináltam ezt blogot, meg miért pont így és ide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Azért szántam rá az időt erre a blogmotorra, a bekonfigurálására, stb. mivel szerettem volna egy felhőszolgáltatótól független módszert arra, hogy közzétegyem, amit közzé szeretnék tenni. Ha valaki ismeri a git működését, az tudja, hogy ez ebben a formában miért független és jó így. Aki meg nem, azokat nem untatom a technikai részletekkel! ;-)</p>
</div>
<div class="paragraph">
<p>Tipikusan ilyen dolgok voltak a Pestre / Dublinba költözésemmel kapcsolatos élmények, amelyeket anno szívesen osztottam meg sztorik és képek kiséretében. De szívesen mesélek a lekűzdött technikai problémákról. Ezek az utóbbi időben rendszerint az OmniOS-en töltött kalandozásaimat jelentik. A fényképalbumok valószínűleg továbbra is FB-albumra vagy épp google photos albumra mutató linkeket fognak jelenteni. (Az eredetik úgyis megvannak a nas-on)
Ami miatt viszont a blogmotor ötlete megtetszett: nem csak beleírok #blog címkéket a szövegbe ezek után, hanem a tag-eket valóban rátszi (reményeim szerint) a bejegyzéseimre, és ennek megfelelően lehet bennük akár keresni is.</p>
</div>
<div class="paragraph">
<p>Ami már csak azért is jó, mert sokszor szembesültem én magam is avval, hogy de jó lett volna, ha anno ezt megírom és nem újra kell kitaláljam nulláról google / stackoverflow és más woodo segítségével, hogy elsőre hogy is oldottam meg. Nem mondom, néha volt, hogy nem találtam meg ugyanazt és másodjára egy sokkal elegánsabb megoldást találtam ugyanarra a problémára. De ilyenkor csak az emlékezetem marad támpontnak a kétféle megoldás összehasonlítására. Különben is: később semmi sem akadályoz, még ha tudod is a megoldást (magadnak köszönhetően), hogy egy még szebb megoldást találj, egy már ismert problémára.</p>
</div>
<div class="paragraph">
<p>Köszönöm a figyelmet!
Kéremkapcsojjaki'!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_curriculum_vitae_en_why_on_earth_did_i_this_blog_why_this_way_why_here">Curriculum Vitae/en == why on earth did I this blog, why this way, why here</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I spent the time and effort to configure and make work this blog engine, because I wanted a cloud-provider independent way to publish what I want to publish. Who nows git&#8217;s modus operandi will also know why this solution is an independent one and why could this work. Thy who don&#8217;t know git that deep, well I don&#8217;t want to bother them with technical details! ;-)</p>
</div>
<div class="paragraph">
<p>Typical topics around my blogposts will/were be the moments and stories when I moved to Budapest / Dublin. Those were events in my life I liked to share with details in the stories, or just publish some pictures. However I also like to share how did I solved technical issues which lately means my adventures regarding OmniOS. Probably I will share photo albums via links to my facebook albums or google photos albums. (I have the originals on my nas.)
The reason why I thought a blog-engine would be a good idea: From now on, I don&#8217;t just write #tag into my posts, but (hopefully) the engine will track my tags and later you can look up on them.</p>
</div>
<div class="paragraph">
<p>Which is good, because I faced with the scenario many times when it could be handy If I already wrote what did I solved and how, and I don&#8217;t have to reinvent the wheel again, and again using google / stackoverflow or other mumbo-jumbo. And maybe the second solution is not as good (eg. because of time pressure) like the first one was. I don&#8217;t say, that sometimes I did not found a better or more elegant solution on the second time. I&#8217;m just sayin' that only my unreliable memories is my basis to compare the two solution.
And nothing blocks you later, (even if you already know your solution because of your own cookbook aka. blog), to improve that!</p>
</div>
<div class="paragraph">
<p>Thanks for reading!
That&#8217;s all folks!</p>
</div>
</div>
</div>]]></description><link>https://pasztor.github.io/blog/2018/09/02/First-Entry.html</link><guid isPermaLink="true">https://pasztor.github.io/blog/2018/09/02/First-Entry.html</guid><category><![CDATA[Blog]]></category><category><![CDATA[CV]]></category><dc:creator><![CDATA[PÁSZTOR György]]></dc:creator><pubDate>Sun, 02 Sep 2018 00:00:00 GMT</pubDate></item></channel></rss>